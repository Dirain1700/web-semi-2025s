# Grammer

おはこんばんにちは。さっき給与が振り込まれたんですけど、先月1回しか働いていないので雀の涙でした。そろそろ文法に入らないとまずいので、入ります。初回のゼミでどこまで進むんでしょうね？

## 構文

文法ってひとくちに言っても、いや、文法と構文って同義じゃね...?

### 変数宣言

Pythonではただ`=`でつなぐだけでした。
```py
isPythonTerrible = true
```

JavaScriptでは、Pythonのように宣言することもできますが、変数宣言のための接頭辞が3つあります。ただ、初心者が使ってはいけない接頭辞が1つあるので、それの詳細はお伝えしません。ちなみにこの資料書いたらGitHub Copilotに評価させてるんですけど、これたぶんあとで怒られると思います。

- var (使ったらあかん)
- let
- const

これらを変数の名前の前に書いて、変数宣言をエレガント(？)に行いましょう。Copilotさん、エレガントの代わりの表現をこの文の続きに書いといてください。

（例：スマートに、洗練された方法で、など。ここでは「スマートに」としておきます）

接頭辞の働きは以下のとおりです。
再宣言とは接頭辞をつけて同じ変数名での代入、再代入は接頭辞なしでの代入です。

| 接頭辞 | 再宣言 | 再代入 |
| :--- | :--: | :--: |
| 接頭辞なし | ○ | ○ |
| var | ○ | ○ |
| let | × | ○ |
| const | × | × |

このうち、接頭辞なしとvarは絶対アカンやつです。何がアカンか、わかりますか？

<details>
<summary>答え (クリックして表示)</summary>
再宣言ができてしまう
</details>

これができるとなにがまずいか、というと、変数名が衝突します。とりあえず、見てみましょう。

```js
// varを使った変数名の衝突例
var name = "Alice";
console.log(name); // Alice

var name = "Bob"; // 再宣言してしまう
console.log(name); // Bob

// letやconstならエラーになるが、varだと上書きされてしまう
```

GitHub Copilotに書いてもらいました。ありがとう！

え、じゃあ再代入もアカンのじゃ？と思ったそこのあなた、そうですよ。ただし、接頭辞をつけて変数宣言をすることを徹底していれば、再代入のときはその変数はすでに宣言されていることに気づける、というかそれが前提ですから、危険性は低減されます。

`const`で宣言した変数は再代入もできません。え、じゃあそれ定数じゃん、とか思うじゃないですか。代入された値がプリミティブ(=stringまたはnumber)ならまあ実質そうなんですが、それ以外、特にArrayとかのとき、Arrayの中身が可変なので、定数とはいえません。

nullとかundefinedは変わらないじゃん！とか思ったそこのあなた、nullやundefinedをconstで代入してどうするおつもりなんですか？

余談というか重要な話なんですけど、変数宣言の終わりにはセミコロンつけてください。例でもつけてます。つけないからって何も起きないんですけど、つけるのがマナーです。ちなこれガチ

### スコープ

変数にはスコープがあります。スコープというのは変数が使える範囲です。

| 接頭辞 | スコープ |
| :--- | :--: |
| 接頭辞なし | global |
| var | global |
| let | 宣言したブロック |
| const | 宣言したブロック |

宣言したブロックというのは、まあそのままなのですが、

```js
{
	const name = "Alice";
	console.log(name); // <- Alice
}
console.log(name); // ReferenceError: name is not defined
```

このように、ブロック`{}`内で`let`、`const`を用いて宣言した変数はそのブロック外では使えません。

### function

難関です。私がJavaScriptを始めたとき、中2だったかな？そもそも周りにプログラマーがいなくて、独学しかできなかったので、ここですごい躓きました。とりあえず基本の文法を見てみましょう。

```js
function printArg(arg) {
	console.log(arg)
}
```

ただのconsole.logをラップした関数です。今となっては普通に読めるんですが、当時はまったくわけがわかりませんでした。Pythonを授業であつかったみなさんなら余裕で理解できると思いますが、解説します。

- printArgは関数の名前です。
- argは引数の名前です。こいつはなんなん？と思いませんか？当時のわたしも同じことを思っていました。結論から言うと、**この`printArg(arg)`という部分で`arg`という変数を宣言**しています。Pythonと全く同じなので知ってるよって人は鼻くそでもほじっててください。ちな当時の私はこれで3日ぐらい悩んでました。~~暇かよ。~~ コロナ禍で暇だったんでね...

とりあえず、これをデベロッパーツールにでもコピペして、console.logと同じ要領でprintArgを呼び出してみてください。

できましたね？できたことにして、次に進みます。

functionは、任意の値を一つだけ返すことができます。Pythonと同じですね。

```js
function isNameBlank(name) {
	return !name;
}
```

前回、`!`は否定演算子だとお伝えしました。文字列の否定、逆と言われても？だと思います。`!`をつけるとなんでもbooleanで返ってきます。文字列が空(="")のとき、`!`をつけると`true`が返ってきます。逆に、空でさえなければ`false`が返ってきます。

話は戻って、`isNameBlank("");`を実行するとなにが返ってくるでしょうか？予想してから、実行してみましょう。

値を2つ以上返したい場合があるかもしれませんが、オブジェクトを使うとか配列を使うとして、1つだけに収める必要があります。なぜかというと、**returnは関数実行をそこで止める**からです。ただし、関数でないところでreturnを書いても何も起きません。

最後に一つ重要なことを。引数に**arguments**をつかうのはやめてください。この下にCopilotが理由を追記してくれるはずです。

`arguments`はJavaScriptの予約語（特別な意味を持つ単語）なので、変数名や引数名として使うと予期しない動作やエラーの原因になります。自分で`arguments`という名前を使うのは避けましょう。

過去最長の長さになっている気がしますが、ここから構文全部やるので、ついてきてくださいね？とりあえずアイスでも食べて休憩しましょう。

最近のプレイリストの話でもしますかね？[絶対アイドル辞めないで](https://music.youtube.com/watch?v=HZFR8x7Y540)っていう曲があって、前から知ってたんですけど、Twitterで最近また話題になってたので、聴いてみたんですよ。

ありえん素晴らしい曲だってなって、同じアーティストの曲聴いてみたんですよ。[とくべチュ、して](https://music.youtube.com/watch?v=aVvWVytX_Go)って曲聴いて、これまたありえん素晴らしい曲だってなって、ついにイコラブにハマってしまいました。もう終わりです。2:39の「ショートケーキ いちごみたいに座ってもいい？」とかガチ可愛すぎる

あと、ノイミーの[ラストチャンス、ラストダンス](https://music.youtube.com/watch?v=UEanJdy8m-Y)もいいですね。私は基本的に歌詞より楽曲派なので、この曲の間奏のメロディかっこよくて好きなんですよね。ノイミーはこれが1stアルバムなんですけど、初っ端から飛ばしすぎだろという感想です。強い曲がいっぱいあるのはいいことです。

話を戻して、最近のお気に入りの曲の話(え？)に戻ると、今のイチオシは[青春"サブリミナル"](https://music.youtube.com/watch?v=s6HTG5s8XOI)です。普段歌詞とかそんなに気にしないんですけど、この曲は歌詞も素晴らしいです(語彙力)

歌詞もいいですが、私はこの曲の真骨頂は落ちサビと言い直し転調だと思います。落ちサビっていいんですよ。落ちサビでソロパートに入られたら泣かないオタクなんていませんからね？おすすめの落ちサビソロ曲は[Hello, new dream!](https://music.youtube.com/watch?v=31Jwuvx7HpI)です。是非聴いてみてください。言い直し転調は...まあキモオタしか盛り上がってないのでここでは言わないでおきます...

何が言いたいかというと、2次元アイドルオタクのプレイリストがいつのまにかイコラブとノイミーで埋め尽くされていたという話でした。指原莉乃には勝てませんでした。おしまい。そろそろアイスが食べ頃ですね。

閑話休題。ちなみにアイスは溶けてました。読む側にはちょうどいいってことで...曲聴いてたら溶けますけど...

### for

みんな大好きfor文です。for文と言っても、イテレータ走査型と、カウント型の2種類あります。
イテレータがなんなのかはわからなくてもいい...ですか？Copilotさん意見ください。

イテレータとは「順番に値を取り出せるもの」のことです。配列や文字列など、for...ofで1つずつ値を取り出せるものはイテレータと呼ばれます。難しく考えず「for...ofで回せるもの」と思っておけばOKです。

イテレータ走査型にも2種類あって、for...ofとfor...inの2つがあります。

for...ofは配列に使います。for...inは`{ key: value }`で表される**連想配列**に使います。

[for...of - JavaScript | MDN](https://developer.mozilla.org/ja/docs/Web/JavaScript/Reference/Statements/for...of)
[for...in - JavaScript | MDN](https://developer.mozilla.org/ja/docs/Web/JavaScript/Reference/Statements/for...in)

```js
const arr = ["a", "f", "1", "8"];

const dict = {
	"taro": "saitama",
	"jiro": "tokyo",
	"saburo": "kagawa",
	"shiro": "inu"
};

for (const i of arr) {
	console.log(i);
}

for (const k in dict) {
	console.log(k, dict[k])
}
```

言い忘れていましたが、連想配列では、ブラケット記法という方法で変数をkeyとしてvalueにアクセスすることができます。
たとえば、dictのtaroが欲しければ、`dict["taro"]`のようにアクセスすることもできますが、`const key = "taro";`のように変数に値を格納して、それをkeyとして連想配列のvalueにアクセスできます。
```js
// 上のdictを先に定義してください
const key = "taro";
console.log(dict["taro"]);
console.log(dict[key]);
```

連想配列の補足もしたところで、for文の例を実行してみてください。中身が見えるはずです。つぎ、カウント型のfor文！

Pythonのアレです。まずPythonの例

```py
for i in range(10):
	print(i)
```

これ9まで出るんでしたっけ？10まで？Copilotさんどっち？

Pythonのrange(10)は0から9まで、つまり10個分出力されます（10は含まれません）。

JavaScriptだとこう:

[for - JavaScript | MDN](https://developer.mozilla.org/ja/docs/Web/JavaScript/Reference/Statements/for)

```js
for (let i = 0;i < 10;i++) {
	console.log(i);
}
```

`i++`はここでは`i = i + 1`と同じです。

forのかっこの中身をセミコロンで区切って読みます。最初のセクションは、forループに入る前に1回だけ行う処理を書きます。ここでは、`let i = 0`で初期値0を宣言します。次のセクションではfor文の操作、つまり`{}`の中を動かす条件を書きます。ここでは**iが10より小さい**ですね。最後のセクションでは、`{}`の中を動かしたあとに行う処理を書きます。つまり、

1. iに0を代入
2. iが10より小さいので中身へ
3. console.log(i)、ただしi = 0
4. iに1を加算
5. iが10より小さいので中身へ

30. console.log(i)、ただしi = 9
31. iに1を加算
32. iが10より小さくないので終了

です。

### break & continue

ちょっと時間がなくなってきたので例は省きますが、for文ではbreakキーワードでループ自体を強制終了、continueでループのうち今走っている回をスキップすることができます。for文は関数ではないのでreturnとかできないので、これらを使います。

[break - JavaScript | MDN](https://developer.mozilla.org/ja/docs/Web/JavaScript/Reference/Statements/break)
[continue - JavaScript | MDN](https://developer.mozilla.org/ja/docs/Web/JavaScript/Reference/Statements/continue)

labelを使うと、多重のfor文を一気に抜けたりすることができます。詳しくはMDNを見た方がわかりやすいと思います。っていうかさ、MDNって例をそのページで実行できるから最初っからこれみたほうがいいと思うんだよね(本末転倒)

[label - JavaScript | MDN](https://developer.mozilla.org/ja/docs/Web/JavaScript/Reference/Statements/label)

ここまで。次回は演算子の話を垂れ流します。というか、演算子は結局MDN見た方が早いから、AIに作らせてもいいですよね？品質は私が担保します。